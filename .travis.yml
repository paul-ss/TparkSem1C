dist:     xenial
sudo:     required

language: c

os: linux

compiler: gcc

install:
    - sudo add-apt-repository ppa:jonathonf/gcc-7.1
    - sudo apt-get update

     #Install cmake & gcc
    - sudo apt install -y cmake
    - sudo apt-get install gcc-7 g++-7

     #Install gtest
    - sudo apt-get install -y libgtest-dev

     #sudo apt-get install gtest
    - cd /usr/src/gtest
    - sudo cmake CMakeLists.txt
    - sudo make
    - sudo cp *.a /usr/lib
    - cd -
    #- sudo ln -s /usr/lib/libgtest.a /usr/local/lib/gtest/libgtest.a
    #- sudo ln -s /usr/lib/libgtest_main.a /usr/local/lib/gtest/libgtest_main.a

     #Install valgrind
    - sudo apt-get install -y valgrind


before_script:
    - ./linters/run.sh

script:
    - mkdir build
    - cd build
    - cmake ..
    - make
    - ctest -V